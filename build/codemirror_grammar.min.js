/**
*
*   classy.js
*   Object-Oriented mini-framework for JavaScript
*   @version: 0.2.1
*
*   https://github.com/foo123/classy.js
*
**/!function(t){"object"==typeof module&&module.exports?t(module.exports):"function"==typeof define&&define.amd?define(["exports"],function(e){t(e)}):t(this)}.call(this,function(t){if(!t.Classy){var e=Array.prototype.slice,o=(Array.prototype.splice,Array.prototype.concat,Object.prototype.hasOwnProperty),r=Object.prototype.toString,n=Object.defineProperties,_=Object.create||function(t,e){var o,r=function(){};return r.prototype=t,o=new r,o.__proto__=t,n&&"undefined"!=typeof e&&n(o,e),o},p=function(t){return t&&this.__class__&&this.__class__.__super__&&(t="constructor"==t?this.__class__.__super__:this.__class__.__super__.prototype[""+t])?t.apply(this,e.call(arguments,1)||[]):void 0},i=function(){var t,n,_,p,i,s,c,a=e.call(arguments);for(n=a.shift()||{},t=a.length,c=0;t>c;c++)if(_=a[c],_&&"object"==typeof _)for(s in _)o.call(_,s)&&(i=_[s],p=r.call(i),n[s]="number"==typeof i||i instanceof Number?0+i:i&&("[object Array]"==p||i instanceof Array||"string"==typeof i||i instanceof String)?i.slice(0):i);return n},s=function(t,e){t=t||Object,e=e||{};var o=e.constructor?e.constructor:function(){};return o.prototype=_(t.prototype),o.prototype=i(o.prototype,e),o.prototype.constructor=o.prototype.__class__=o,o.prototype.super__=p,o.__super__=t,o.__static__="object"==typeof t.__static__?i({},t.__static__):{},o},c=Mixin=i,a=function(){var t=e.call(arguments),o=t.length,r=null;if(o>=2){var n=t[0]||{},_=t[1]||{},p={},a=n.Extends||n.extends||Object,l=n.Implements||n.implements,u=n.Mixin||n.mixin;u&&u.prototype&&(p=Mixin(p,u.prototype)),l&&l.prototype&&(p=c(p,l.prototype)),r=s(a,i(p,_)),n.Static&&"object"==typeof n.Static&&(r.__static__=i(r.__static__,n.Static))}else r=s(Object,t[0]);return r};t.Classy={VERSION:"0.2.1",Class:a,Extends:s,Implements:c,Mixin:Mixin,Create:_,Merge:i}}});/**
*
*   A simple Regular Expression Analyzer
*   @version 0.2.3
*   https://github.com/foo123/regex-analyzer
*
**/!function(t){"object"==typeof module&&module.exports?t(module.exports):"function"==typeof define&&define.amd?define(["exports"],function(e){t(e)}):t(this)}.call(this,function(t){if(!t.RegExAnalyzer){var e="\\",r=/^\{\s*(\d+)\s*,?\s*(\d+)?\s*\}/,a=/^u([0-9a-fA-F]{4})/,p=/^x([0-9a-fA-F]{2})/,s={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},h={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},n=Object.prototype.toString,g=function(t,e){if(e&&(e instanceof Array||"[object Array]"==n.call(e)))for(var r=0,a=e.length;a>r;r++)t[e[r]]=1;else for(var r in e)t[r]=1;return t},i=function(t,e){t&&(t instanceof Array||"[object Array]"==n.call(t))&&(e=t[1],t=t[0]);var r,a,p=t.charCodeAt(0),s=e.charCodeAt(0);if(s==p)return[String.fromCharCode(p)];for(a=[],r=p;s>=r;++r)a.push(String.fromCharCode(r));return a},o=function(t){var e,r,a,p,s,h,n={},l={};if("Alternation"==t.type)for(a=0,p=t.part.length;p>a;a++)s=o(t.part[a]),n=g(n,s.peek),l=g(l,s.negativepeek);else if("Group"==t.type)s=o(t.part),n=g(n,s.peek),l=g(l,s.negativepeek);else if("Sequence"==t.type){for(a=0,p=t.part.length,r=t.part[a],h=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;!h;)s=o(r.part),n=g(n,s.peek),l=g(l,s.negativepeek),a++,r=t.part[a],h=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;p>a&&(r=t.part[a],"Special"!=r.type||"^"!=r.part&&"$"!=r.part||(r=t.part[a+1]||null),r&&"Quantifier"==r.type&&(r=r.part),r&&(s=o(r),n=g(n,s.peek),l=g(l,s.negativepeek)))}else if("CharGroup"==t.type)for(e=t.flags.NotMatch?l:n,a=0,p=t.part.length;p>a;a++)r=t.part[a],"Chars"==r.type?e=g(e,r.part):"CharRange"==r.type?e=g(e,i(r.part)):"UnicodeChar"==r.type||"HexChar"==r.type?e[r.flags.Char]=1:"Special"==r.type&&("D"==r.part?t.flags.NotMatch?n["\\d"]=1:l["\\d"]=1:"W"==r.part?t.flags.NotMatch?n["\\w"]=1:l["\\W"]=1:"S"==r.part?t.flags.NotMatch?n["\\s"]=1:l["\\s"]=1:e["\\"+r.part]=1);else"String"==t.type?n[t.part.charAt(0)]=1:"Special"!=t.type||t.flags.MatchStart||t.flags.MatchEnd?("UnicodeChar"==t.type||"HexChar"==t.type)&&(n[t.flags.Char]=1):"D"==t.part?l["\\d"]=1:"W"==t.part?l["\\W"]=1:"S"==t.part?l["\\s"]=1:n["\\"+t.part]=1;return{peek:n,negativepeek:l}},l=function(t,e){t&&this.setRegex(t,e)};l.VERSION="0.2.3",l.getCharRange=i,l.prototype={constructor:l,VERSION:l.VERSION,regex:null,groupIndex:null,pos:null,flags:null,parts:null,getCharRange:l.getCharRange,getPeekChars:function(){var t,e,r,a,p=this.flags&&this.flags.i,h=o(this.parts);for(t in h){a={},r=h[t];for(e in r)"\\d"==e?(delete r[e],a=g(a,i("0","9"))):"\\s"==e?(delete r[e],a=g(a,["\f","\n","\r","	","","Â ","\u2028","\u2029"])):"\\w"==e?(delete r[e],a=g(a,["_"].concat(i("0","9")).concat(i("a","z")).concat(i("A","Z")))):"\\."==e?(delete r[e],a[s["."]]=1):"\\"!=e.charAt(0)&&p?(a[e.toLowerCase()]=1,a[e.toUpperCase()]=1):"\\"==e.charAt(0)&&delete r[e];h[t]=g(r,a)}return h},setRegex:function(t,e){if(t){this.flags={},e=e||"/";for(var r=t.toString(),a=r.length,p=r.charAt(a-1);e!=p;)this.flags[p]=1,r=r.substr(0,a-1),a=r.length,p=r.charAt(a-1);e==r.charAt(0)&&e==r.charAt(a-1)&&(r=r.substr(1,a-2)),this.regex=r}return this},analyze:function(){var t,n,g,i="",o=[],l=[],u=!1;for(this.pos=0,this.groupIndex=0;this.pos<this.regex.length;)t=this.regex.charAt(this.pos++),u=e==t?!0:!1,u&&(t=this.regex.charAt(this.pos++)),u?"u"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),g=a.exec(this.regex.substr(this.pos-1)),this.pos+=g[0].length-1,l.push({part:g[0],flags:{Char:String.fromCharCode(parseInt(g[1],16)),Code:g[1]},type:"UnicodeChar"})):"x"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),g=p.exec(this.regex.substr(this.pos-1)),this.pos+=g[0].length-1,l.push({part:g[0],flags:{Char:String.fromCharCode(parseInt(g[1],16)),Code:g[1]},type:"HexChar"})):h[t]&&"/"!=t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),n={},n[h[t]]=1,l.push({part:t,flags:n,type:"Special"})):i+=t:"|"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),o.push({part:l,flags:{},type:"Sequence"}),l=[]):"["==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),l.push(this.chargroup())):"("==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),l.push(this.subgroup())):"{"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),g=r.exec(this.regex.substr(this.pos-1)),this.pos+=g[0].length-1,l.push({part:l.pop(),flags:{part:g[0],MatchMinimum:g[1],MatchMaximum:g[2]||"unlimited"},type:"Quantifier"})):"*"==t||"+"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),n={},n[s[t]]=1,"?"==this.regex.charAt(this.pos)?(n.isGreedy=0,this.pos++):n.isGreedy=1,l.push({part:l.pop(),flags:n,type:"Quantifier"})):"?"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),n={},n[s[t]]=1,l.push({part:l.pop(),flags:n,type:"Quantifier"})):s[t]?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),n={},n[s[t]]=1,l.push({part:t,flags:n,type:"Special"})):i+=t;return i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),o.length?(o.push({part:l,flags:{},type:"Sequence"}),l=[],n={},n[s["|"]]=1,this.parts={part:o,flags:n,type:"Alternation"}):this.parts={part:l,flags:{},type:"Sequence"},this},subgroup:function(){var t,n,g,i="",o=[],l=[],u={},f=!1,c=this.regex.substr(this.pos,2);for("?:"==c?(u.NotCaptured=1,this.pos+=2):"?="==c?(u.LookAhead=1,this.pos+=2):"?!"==c&&(u.NegativeLookAhead=1,this.pos+=2),u.GroupIndex=++this.groupIndex;this.pos<this.regex.length;)if(t=this.regex.charAt(this.pos++),f=e==t?!0:!1,f&&(t=this.regex.charAt(this.pos++)),f)"u"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),g=a.exec(this.regex.substr(this.pos-1)),this.pos+=g[0].length-1,l.push({part:g[0],flags:{Char:String.fromCharCode(parseInt(g[1],16)),Code:g[1]},type:"UnicodeChar"})):"x"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),g=p.exec(this.regex.substr(this.pos-1)),this.pos+=g[0].length-1,l.push({part:g[0],flags:{Char:String.fromCharCode(parseInt(g[1],16)),Code:g[1]},type:"HexChar"})):h[t]&&"/"!=t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),n={},n[h[t]]=1,l.push({part:t,flags:n,type:"Special"})):i+=t;else{if(")"==t)return i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),o.length?(o.push({part:l,flags:{},type:"Sequence"}),l=[],n={},n[s["|"]]=1,{part:{part:o,flags:n,type:"Alternation"},flags:u,type:"Group"}):{part:{part:l,flags:{},type:"Sequence"},flags:u,type:"Group"};"|"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),o.push({part:l,flags:{},type:"Sequence"}),l=[]):"["==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),l.push(this.chargroup())):"("==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),l.push(this.subgroup())):"{"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),g=r.exec(this.regex.substr(this.pos-1)),this.pos+=g[0].length-1,l.push({part:l.pop(),flags:{part:g[0],MatchMinimum:g[1],MatchMaximum:g[2]||"unlimited"},type:"Quantifier"})):"*"==t||"+"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),n={},n[s[t]]=1,"?"==this.regex.charAt(this.pos)?(n.isGreedy=0,this.pos++):n.isGreedy=1,l.push({part:l.pop(),flags:n,type:"Quantifier"})):"?"==t?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),n={},n[s[t]]=1,l.push({part:l.pop(),flags:n,type:"Quantifier"})):s[t]?(i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),n={},n[s[t]]=1,l.push({part:t,flags:n,type:"Special"})):i+=t}return i.length&&(l.push({part:i,flags:{},type:"String"}),i=""),o.length?(o.push({part:l,flags:{},type:"Sequence"}),l=[],n={},n[s["|"]]=1,{part:{part:o,flags:n,type:"Alternation"},flags:u,type:"Group"}):{part:{part:l,flags:{},type:"Sequence"},flags:u,type:"Group"}},chargroup:function(){var t,r,s,n,g,i,o=[],l=[],u={},f=!1,c=!1;for("^"==this.regex.charAt(this.pos)&&(u.NotMatch=1,this.pos++);this.pos<this.regex.length;)if(i=!1,s=r,r=this.regex.charAt(this.pos++),c=e==r?!0:!1,c&&(r=this.regex.charAt(this.pos++)),c&&("u"==r?(g=a.exec(this.regex.substr(this.pos-1)),this.pos+=g[0].length-1,r=String.fromCharCode(parseInt(g[1],16)),i=!0):"x"==r&&(g=p.exec(this.regex.substr(this.pos-1)),this.pos+=g[0].length-1,r=String.fromCharCode(parseInt(g[1],16)),i=!0)),f)l.length&&(o.push({part:l,flags:{},type:"Chars"}),l=[]),n[1]=r,f=!1,o.push({part:n,flags:{},type:"CharRange"});else if(c)!i&&h[r]&&"/"!=r?(l.length&&(o.push({part:l,flags:{},type:"Chars"}),l=[]),t={},t[h[r]]=1,o.push({part:r,flags:t,type:"Special"})):l.push(r);else{if("]"==r)return l.length&&(o.push({part:l,flags:{},type:"Chars"}),l=[]),{part:o,flags:u,type:"CharGroup"};"-"==r?(n=[s,""],l.pop(),f=!0):l.push(r)}return l.length&&(o.push({part:l,flags:{},type:"Chars"}),l=[]),{part:o,flags:u,type:"CharGroup"}}},t.RegExAnalyzer=l}});/**
*
*   CodeMirrorGrammar
*   @version: 0.4.2
*   Transform a grammar specification in JSON format,
*   into a CodeMirror syntax-highlight parser mode
*
*   https://github.com/foo123/codemirror-grammar
*
**/!function(t,e,n,s){if("object"==typeof module&&module.exports)module.exports=s;else if("function"==typeof define&&define.amd)define(s);else if(t&&t.length){for(var i=0,r=t.length;r>i;i++)t[i]=e[t[i]];e[n]=s.apply({},t)}else e[n]=s()}(["Classy","RegExAnalyzer"],this,"CodeMirrorGrammar",function(t,e,n){var s,i="0.4.2",r=t.Class,o=2,h=4,u=8,c=9,a=16,l=32,k=64,f=128,p=256,m=512,R=33,d=34,g=36,y=40,E=48,O=64,v=128,x=4,B=8,T=16,P=32,b=64,S=128,w=256,A=512,_=1024,C=2048,L=4096,q=8192,N={ONEOF:S,EITHER:S,ALL:w,ALLOF:w,ZEROORONE:A,ZEROORMORE:_,ONEORMORE:C},z={BLOCK:b,"ESCAPED-BLOCK":P,SIMPLE:T,GROUP:L,NGRAM:q,"N-GRAM":q},M=Array.prototype.slice,j=(Array.prototype.splice,Array.prototype.concat,Object.prototype.hasOwnProperty),G=Object.prototype.toString,D=function(t){var e=typeof t,s=G.call(t);return"number"==e||t instanceof Number?o:!0===t||!1===t?h:t&&("string"==e||t instanceof String)?1==t.length?c:u:t&&("[object RegExp]"==s||t instanceof RegExp)?a:t&&("[object Array]"==s||t instanceof Array)?l:t&&"[object Object]"==s?k:null===t?f:n===t?p:m},I=function(t,e){return e||l!=D(t)?[t]:t},U=function(t,e){return t=I(t,e),(e||l!=D(t[0]))&&(t=[t]),t},K=function(t){var e,n=D(t);if(k!=n&&l!=n)return t;var s,i={};for(s in t)j.call(t,s)&&(e=D(t[s]),i[s]=k==e?K(t[s]):l==e?t[s].slice():t[s]);return i},F=function(){var t=M.call(arguments),e=t.length;if(1>e)return null;if(2>e)return K(t[0]);var n,s,i,r,o=t.shift(),h=K(o);for(e--,s=0;e>s;s++)if(n=t.shift())for(i in n)j.call(n,i)&&(j.call(o,i)?(r=D(o[i]),k&~u&r&&(h[i]=F(o[i],n[i]))):h[i]=K(n[i]));return h},Z=r({constructor:function(t,e){e?(this.stream=e,this.string=""+e.string,this.start=e.start,this.pos=e.pos):(this.string=""+t,this.start=this.pos=0)},stream:null,string:"",start:0,pos:0,sol:function(){return 0==this.pos},eol:function(){return this.pos>=this.string.length},matchChar:function(t,e){e=!1!==e;var n=this.string.charAt(this.pos)||"";return t==n?(e&&(this.pos+=1,this.stream&&(this.stream.pos=this.pos)),n):!1},matchStr:function(t,e,n){n=!1!==n;var s=this.pos,i=this.string.charAt(s);if(e.peek[i]){var r=t.length,o=this.string.substr(s,r);if(t==o)return n&&(this.pos+=r,this.stream&&(this.stream.pos=this.pos)),o}return!1},matchRegex:function(t,e,n,s){n=!1!==n,s=s||0;var i=this.pos,r=this.string.charAt(i);if(e.peek&&e.peek[r]||e.negativepeek&&!e.negativepeek[r]){var o=this.string.slice(i).match(t);return!o||o.index>0?!1:(n&&(this.pos+=o[s].length,this.stream&&(this.stream.pos=this.pos)),o)}return!1},skipToEnd:function(){return this.pos=this.string.length,this.stream&&(this.stream.pos=this.pos),this},peek:function(){return this.string.charAt(this.pos)||n},next:function(){if(this.pos<this.string.length){var t=this.string.charAt(this.pos++);return this.stream&&(this.stream.pos=this.pos),t}return n},backUp:function(t){return this.pos-=t,this.stream&&(this.stream.pos=this.pos),this},backTo:function(t){return this.pos=t,this.stream&&(this.stream.pos=this.pos),this},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.stream&&(this.stream.pos=this.pos),this.pos>t},current:function(){return this.string.slice(this.start,this.pos)},shift:function(){return this.start=this.pos,this}}),$=/([\-\.\*\+\?\^\$\{\}\(\)\|\[\]\/\\])/g,H=function(t,e){return e.length-t.length},V=function(t,e){return u&D(e)&&u&D(t)&&e.length&&e.length<=t.length&&e==t.substr(0,e.length)},J=function(t,n,s){if(!t||o==D(t))return t;var i=n?n.length||0:0;if(i&&n==t.substr(0,i)){var r,h,u,c="^("+t.substr(i)+")";return s[c]||(r=new RegExp(c),u=new e(r).analyze(),h=u.getPeekChars(),Object.keys(h.peek).length||(h.peek=null),Object.keys(h.negativepeek).length||(h.negativepeek=null),s[c]=[r,h]),s[c]}return t},Q=function(t,e){var n,s,i={},r="";for(u==D(e)&&(r=e),n=0,s=t.length;s>n;n++)i[t[n].charAt(0)]=1,t[n]=t[n].replace($,"\\$1");return[new RegExp("^("+t.sort(H).join("|")+")"+r),{peek:i,negativepeek:null},1]},W=r({constructor:function(t,e,n,s){this.name=t,this.pattern=e,this.key=n||0,this.type=s||E},name:null,pattern:null,peek:null,type:null,key:0,toString:function(){var t="[";return t+="Matcher: "+this.name,t+=", Type: "+this.type,t+=", Pattern: "+(this.pattern?this.pattern.toString():null),t+="]"},match:function(){return[this.key,this.pattern]}}),X=r({Extends:W},{constructor:function(t,e,n){this.name=t,this.pattern=e,this.type=R,this.key=n||0},match:function(t,e){var n;return(n=t.matchChar(this.pattern,e))?[this.key,n]:!1}}),Y=r({Extends:W},{constructor:function(t,e,n){this.name=t,this.pattern=e,this.peek={peek:{},negativepeek:null},this.peek.peek[""+e.charAt(0)]=1,this.type=d,this.key=n||0},match:function(t,e){var n;return(n=t.matchStr(this.pattern,this.peek,e))?[this.key,n]:!1}}),te=r({Extends:W},{constructor:function(t,e,n){this.name=t,this.pattern=e[0],this.peek=e[1],this.isComposite=e[2]||0,this.type=g,this.key=n||0},isComposite:0,match:function(t,e){var n;return(n=t.matchRegex(this.pattern,this.peek,e,this.isComposite))?[this.key,n]:!1}}),ee=r({Extends:W},{constructor:function(t,e,n){this.name=t,this.type=y,this.key=n||0},match:function(t,e){return!1!==e&&t.skipToEnd(),[this.key,""]}}),ne=function(t,e,n,s){n=n||0;var i,r=t+"_SimpleMatcher",a=D(e);return o==a?e:(s[r]||(i=h==a?new W(r,e,n):f==a?new ee(r,e,n):c==a?new X(r,e,n):u==a?new Y(r,e,n):l==a?new te(r,e,n):e,s[r]=i),s[r])},se=r({Extends:W},{constructor:function(t,e,n){this.name=t,this.matchers=e,this.type=O,this.useOwnKey=!1!==n},matchers:null,useOwnKey:!0,test:function(t){var e,n,s=this.matchers,i=s.length;for(e=0;i>e;e++)if(n=s[e].test(t))return!0;return!1},match:function(t,e){var n,s,i=this.matchers,r=i.length;for(n=0;r>n;n++)if(s=i[n].match(t,e))return this.useOwnKey?[n,s[1]]:s;return!1}}),ie=function(t,e,n,s,i,r){var o,h,u,c,a,k=!1,f=!1,p=t+"_CompoMatcher";if(!r[p]){if(o=I(e),u=o.length,s)for(c=(u>>1)+1,h=0;c>=h;h++){if(l==D(o[h])||l==D(o[u-1-h])){k=!0;break}if(V(o[h],n)||V(o[u-1-h],n)){f=!0;break}}if(!s||k||f){for(h=0;u>h;h++)o[h]=l==D(o[h])?ie(p+"_"+h,o[h],n,s,i,r):ne(p+"_"+h,J(o[h],n,i),h,r);a=o.length>1?new se(p,o):o[0]}else a=ne(p,Q(o,s),0,r);r[p]=a}return r[p]},re=r({Extends:W},{constructor:function(t,e,n){this.name=t,this.type=v,this.start=new se(this.name+"_StartMatcher",e,!1),this.pattern=this.start.pattern||null,this.end=n},start:null,end:null,test:function(t){return this.start.test(t)},match:function(t,e){var n=this.start.match(t,e);if(n){var s=this.end[n[0]];return o==D(s)&&(s=new Y(this.name+"_EndMatcher",n[1][s+1])),s}return!1}}),oe=function(t,e,n,s,i){var r,o,h,u,c,a,l,k=t+"_BlockMatcher";if(!i[k]){for(u=[],c=[],r=U(e),o=0,h=r.length;h>o;o++)a=ne(k+"_0_"+o,J(r[o][0],n,s),o,i),l=r[o].length>1?ne(k+"_1_"+o,J(r[o][1],n,s),o,i):a,u.push(a),c.push(l);i[k]=new re(k,u,c)}return i[k]},he=r({constructor:function(t){this.id=t||0,this.stack=[],this.inBlock=null,this.endBlock=null,this.currentToken=B},id:0,stack:null,inBlock:null,endBlock:null,currentToken:null,clone:function(){var t=new this.__class__;return t.id=this.id,t.stack=this.stack.slice(),t.inBlock=this.inBlock,t.endBlock=this.endBlock,t.currentToken=this.currentToken,t},toString:function(){return"_"+this.id+"_"+this.inBlock}}),ue=r({constructor:function(t,e,n,s){t&&(this.name=t),e&&(this.token=e),n&&(this.type=n),s&&(this.style=s),this.tokenName=this.name},name:null,token:null,tokenName:null,type:null,style:null,isRequired:!1,ERROR:!1,streamPos:null,stackPos:null,actionBefore:null,actionAfter:null,toString:function(){var t="[";return t+="Tokenizer: "+this.name,t+=", Type: "+this.type,t+=", Token: "+(this.token?this.token.toString():null),t+="]"},required:function(t){return this.isRequired=t?!0:!1,this},pushToken:function(t,e,n){return this.stackPos?t.splice(this.stackPos+(n||0),0,e):t.push(e),this},clone:function(){var t,e,n=M.call(arguments),s=n.length;for(t=new this.__class__,t.name=this.name,t.tokenName=this.tokenName,t.token=this.token,t.type=this.type,t.style=this.style,t.isRequired=this.isRequired,t.ERROR=this.ERROR,t.streamPos=this.streamPos,t.stackPos=this.stackPos,t.actionBefore=this.actionBefore,t.actionAfter=this.actionAfter,e=0;s>e;e++)t[n[e]]=this[n[e]];return t},tokenize:function(t,e){return this.token.match(t)?(e.currentToken=this.type,this.style):!1}}),ce=r({Extends:ue},{constructor:function(t,e,n,s,i){t&&(this.name=t),e&&(this.token=e),n&&(this.type=n),s&&(this.style=s),this.multiline=!1!==i,this.endBlock=null,this.tokenName=this.name},multiline:!1,endBlock:null,tokenize:function(t,e){var n=!1,s=!1;if(e.inBlock==this.name?(s=!0,this.endBlock=e.endBlock):!e.inBlock&&(this.endBlock=this.token.match(t))&&(s=!0,e.inBlock=this.name,e.endBlock=this.endBlock),s){for(this.stackPos=e.stack.length,n=this.endBlock.match(t);!n&&!t.eol();){if(this.endBlock.match(t)){n=!0;break}t.next()}return n=n||!this.multiline&&t.eol(),n?(e.inBlock=null,e.endBlock=null):this.pushToken(e.stack,this),e.currentToken=this.type,this.style}return e.inBlock=null,e.endBlock=null,!1}}),ae=r({Extends:ce},{constructor:function(t,e,n,s,i,r){t&&(this.name=t),e&&(this.token=e),n&&(this.type=n),s&&(this.style=s),this.escape=i||"\\",this.multiline=r||!1,this.endBlock=null,this.tokenName=this.name},escape:"\\",tokenize:function(t,e){var n="",s=!1,i=!1,r=!1;if(e.inBlock==this.name?(i=!0,this.endBlock=e.endBlock):!e.inBlock&&(this.endBlock=this.token.match(t))&&(i=!0,e.inBlock=this.name,e.endBlock=this.endBlock),i){for(this.stackPos=e.stack.length,s=this.endBlock.match(t);!s&&!t.eol();){if(!r&&this.endBlock.match(t)){s=!0;break}n=t.next(),r=!r&&n==this.escape}return s=s||!(r&&this.multiline),s?(e.inBlock=null,e.endBlock=null):this.pushToken(e.stack,this),e.currentToken=this.type,this.style}return e.inBlock=null,e.endBlock=null,!1}}),le=r({Extends:ue},{constructor:function(t,e){t&&(this.name=t),e&&(this.type=e),this.tokenName=this.name},tokens:null,buildTokens:function(t){return t&&(this.tokens=I(t),this.token=this.tokens[0]),this}}),ke=r({Extends:le},{constructor:function(t,e){this.type=A,t&&(this.name=t),e&&this.buildTokens(e),this.tokenName=this.name},tokenize:function(t,e){this.isRequired=!1,this.ERROR=!1,this.streamPos=t.pos;var n=this.token.tokenize(t,e);return token.ERROR&&t.backTo(this.streamPos),n}}),fe=r({Extends:le},{constructor:function(t,e){this.type=_,t&&(this.name=t),e&&this.buildTokens(e),this.tokenName=this.name},tokenize:function(t,e,n){var s,i,r,o=this.tokens.length,h=0;for(this.isRequired=!1,this.ERROR=!1,this.streamPos=t.pos,this.stackPos=e.stack.length,s=0;o>s;s++){if(i=this.tokens[s],r=i.tokenize(t,e,n),!1!==r)return this.pushToken(e.stack,this),r;i.ERROR&&(h++,t.backTo(this.streamPos))}return!1}}),pe=r({Extends:le},{constructor:function(t,e){this.type=C,t&&(this.name=t),e&&this.buildTokens(e),this.foundOne=!1,this.tokenName=this.name},foundOne:!1,tokenize:function(t,e,n){var s,i,r,o=this.tokens.length,h=0,u=0;for(this.isRequired=!this.foundOne,this.ERROR=!1,this.streamPos=t.pos,this.stackPos=e.stack.length,r=0;o>r;r++){if(i=this.tokens[r],s=i.tokenize(t,e,n),h+=i.isRequired?1:0,!1!==s)return this.foundOne=!0,this.isRequired=!1,this.ERROR=!1,this.pushToken(e.stack,this.clone("tokens","foundOne")),this.foundOne=!1,s;i.ERROR&&(u++,t.backTo(this.streamPos))}return this.ERROR=this.foundOne?!1:!0,!1}}),me=r({Extends:le},{constructor:function(t,e){this.type=S,t&&(this.name=t),e&&this.buildTokens(e),this.tokenName=this.name},tokenize:function(t,e,n){var s,i,r,o=this.tokens.length,h=0,u=0;for(this.isRequired=!0,this.ERROR=!1,this.streamPos=t.pos,r=0;o>r;r++){if(i=this.tokens[r],s=i.tokenize(t,e,n),h+=i.isRequired?1:0,!1!==s)return s;i.ERROR&&(u++,t.backTo(this.streamPos))}return this.isRequired=h>0?!0:!1,this.ERROR=o==u&&h>0?!0:!1,!1}}),Re=r({Extends:le},{constructor:function(t,e){this.type=w,t&&(this.name=t),e&&this.buildTokens(e),this.tokenName=this.name},tokenize:function(t,e,n){var s,i,r=this.tokens.length,o=!1;if(this.isRequired=!0,this.ERROR=!1,this.streamPos=t.pos,this.stackPos=e.stack.length,s=this.tokens[0],i=s.required(!0).tokenize(t,e,n),!1!==i){this.stackPos=e.stack.length;for(var h=r-1;h>0;h--)this.pushToken(e.stack,this.tokens[h].required(!0),r-h);o=i}else s.ERROR?(this.ERROR=!0,t.backTo(this.streamPos)):s.isRequired&&(this.ERROR=!0);return o}}),de=r({Extends:le},{constructor:function(t,e){this.type=q,t&&(this.name=t),e&&this.buildTokens(e),this.tokenName=this.tokens[0].name},tokenize:function(t,e,n){var s,i,r=this.tokens.length,o=!1;if(this.isRequired=!1,this.ERROR=!1,this.streamPos=t.pos,this.stackPos=e.stack.length,s=this.tokens[0],i=s.required(!1).tokenize(t,e,n),!1!==i){this.stackPos=e.stack.length;for(var h=r-1;h>0;h--)this.pushToken(e.stack,this.tokens[h].required(!0),r-h);o=i}else s.ERROR&&t.backTo(this.streamPos);return o}}),ge=function(t,e,n,i,r,o,h,u,c){var a,l,k,f,p,m=null;if(!c[t]){if(a=i[t]||r[t]||null)if(l=a.type||"simple",l=z[l.toUpperCase()],p=a.action||null,b==l)m=new ce(t,oe(t,a.tokens.slice(),e,h,u),l,o[t]||s,a.multiline);else if(P==l)m=new ae(t,oe(t,a.tokens.slice(),e,h,u),l,o[t]||s,a.escape||"\\",a.multiline||!1);else if(T==l)m=new ue(t,ie(t,a.tokens.slice(),e,n[t],h,u),l,o[t]||s);else if(L==l){k=N[a.match.toUpperCase()],f=I(a.tokens).slice();for(var R=0,d=f.length;d>R;R++)f[R]=ge(f[R],e,n,i,r,o,h,u,c);m=A==k?new ke(t,f):_==k?new fe(t,f):C==k?new pe(t,f):S==k?new me(t,f):new Re(t,f)}else if(q==l){m=U(I(a.tokens).slice()).slice();for(var R=0,d=m.length;d>R;R++){for(var g=m[R],y=0,E=g.length;E>y;y++)g[y]=ge(g[y],e,n,i,r,o,h,u,c);m[R]=new de(t+"_NGRAM_"+R,g)}}c[t]=m}return c[t]},ye=r({constructor:function(t,e){this.LOCALS=e,this.Style=t.Style||{},this.tokens=t.Parser||[]},LOCALS:null,Style:null,tokens:null,getToken:function(t,e){var n,s,i,r,o,h=this.tokens.length,u=this.LOCALS.DEFAULT,c=this.Style.error||"error";if(o=e.stack,r=new Z(null,t),r.eatSpace())return e.currentToken=B,u;for(;o.length;){if(s=o.pop(),i=s.tokenize(r,e,this.LOCALS),!1!==i)return i;if(s.ERROR||s.isRequired)return o.length=0,r.next(),e.currentToken=x,c}for(n=0;h>n;n++){if(s=this.tokens[n],i=s.tokenize(r,e,this.LOCALS),!1!==i)return i;if(s.ERROR||s.isRequired)return o.length=0,r.next(),e.currentToken=x,c}return r.next(),e.currentToken=B,u}}),Ee=function(t,e){return new ye(t,e)},Oe=function(){return function(){return CodeMirror.Pass}},ve={RegExpID:null,RegExpGroups:null,Style:{error:"error"},Lex:null,Syntax:null,Parser:null},xe=function(t){var e,n,s,i,r,o,h,u,c,a,k,f={},p={},m={};if(t.__parsed)return t;for(t=F(t,ve),e=t.RegExpID||null,t.RegExpID=null,delete t.RegExpID,n=t.RegExpGroups||{},t.RegExpGroups=null,delete t.RegExpGroups,h=t.Lex||{},t.Lex=null,delete t.Lex,u=t.Syntax||{},t.Syntax=null,delete t.Syntax,o=t.Style||{},r=t.Parser||[],i=r.length,s=[],c=0;i>c;c++)a=r[c],k=ge(a,e,n,h,u,o,f,p,m)||null,k&&(l==D(k)?s=s.concat(k):s.push(k));return t.Parser=s,t.Style=o,t.__parsed=!0,t},Be={VERSION:i,extend:F,parse:xe,getMode:function(t,e){s=null,t=xe(t);var n={DEFAULT:e||s},i=Ee(t,n),r=function(e,s){return n.conf=e,n.parserConf=s,{startState:function(){return new he},electricChars:t.electricChars?t.electricChars:!1,copyState:function(t){return t.clone()},token:function(t){return function(e,n){return t.getToken(e,n)}}(i),indent:Oe(n)}};return r}};return Be});